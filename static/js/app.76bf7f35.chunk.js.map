{"version":3,"file":"static/js/app.76bf7f35.chunk.js","mappings":"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","sources":["webpack://@dhis2/app-shell/./src/D2App/App.module.css?77cb","D2App/locales/index.js","webpack://@dhis2/app-shell/./src/D2App/components/MenuManagement/DraggableApp.module.css?20e8","D2App/components/MenuManagement/DraggableApp.js","webpack://@dhis2/app-shell/./src/D2App/components/MenuManagement/MenuManagement.module.css?9200","D2App/components/MenuManagement/index.js","D2App/App.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"App_container__KkHQY\",\"title\":\"App_title__OeqjW\",\"description\":\"App_description__VWmvS\"};","//------------------------------------------------------------------------------\n// <auto-generated>\n// This code was generated by d2-i18n-generate.\n//\n// Changes to this file may cause incorrect behavior and will be lost if\n// the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\nimport arTranslations from './ar/translations.json';\nimport csTranslations from './cs/translations.json';\nimport enTranslations from './en/translations.json';\nimport esTranslations from './es/translations.json';\nimport frTranslations from './fr/translations.json';\nimport nbTranslations from './nb/translations.json';\nimport svTranslations from './sv/translations.json';\nimport ukTranslations from './uk/translations.json';\nimport urTranslations from './ur/translations.json';\nimport uz_LatnTranslations from './uz_Latn/translations.json';\nimport uz_UZ_CyrlTranslations from './uz_UZ_Cyrl/translations.json';\nimport uz_UZ_LatnTranslations from './uz_UZ_Latn/translations.json';\nimport viTranslations from './vi/translations.json';\nimport zhTranslations from './zh/translations.json';\nconst namespace = 'default';\ni18n.addResources('ar', namespace, arTranslations);\ni18n.addResources('cs', namespace, csTranslations);\ni18n.addResources('en', namespace, enTranslations);\ni18n.addResources('es', namespace, esTranslations);\ni18n.addResources('fr', namespace, frTranslations);\ni18n.addResources('nb', namespace, nbTranslations);\ni18n.addResources('sv', namespace, svTranslations);\ni18n.addResources('uk', namespace, ukTranslations);\ni18n.addResources('ur', namespace, urTranslations);\ni18n.addResources('uz_Latn', namespace, uz_LatnTranslations);\ni18n.addResources('uz_UZ_Cyrl', namespace, uz_UZ_CyrlTranslations);\ni18n.addResources('uz_UZ_Latn', namespace, uz_UZ_LatnTranslations);\ni18n.addResources('vi', namespace, viTranslations);\ni18n.addResources('zh', namespace, zhTranslations);\nexport default i18n;","// extracted by mini-css-extract-plugin\nexport default {\"app-link\":\"DraggableApp_app-link__O7o3z\",\"app-icon\":\"DraggableApp_app-icon__bMGf1\",\"app-name\":\"DraggableApp_app-name__hE5Oo\"};","import PropTypes from 'prop-types';\nimport React, { useRef } from 'react';\nimport { useDrag, useDrop } from 'react-dnd';\nimport classes from './DraggableApp.module.css';\nconst App = _ref => {\n  let {\n    defaultAction,\n    icon,\n    displayName\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"a\", {\n    className: classes['app-link'],\n    href: defaultAction\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: classes['app-icon'],\n    src: icon\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes['app-name']\n  }, displayName)));\n};\nApp.propTypes = {\n  defaultAction: PropTypes.string.isRequired,\n  displayName: PropTypes.string.isRequired,\n  icon: PropTypes.string.isRequired\n};\nconst DND_ITEM_TYPE = 'APP';\nconst DraggableApp = _ref2 => {\n  let {\n    app,\n    onDrag,\n    onDrop\n  } = _ref2;\n  const [{\n    isDragging\n  }, connectDrag] = useDrag({\n    item: {\n      name: app.name,\n      type: DND_ITEM_TYPE\n    },\n    collect: monitor => ({\n      isDragging: monitor.isDragging()\n    }),\n    end: onDrop\n  });\n  const [, connectDrop] = useDrop({\n    accept: DND_ITEM_TYPE,\n    hover(item) {\n      if (item.name != app.name) {\n        onDrag(item.name, app.name);\n      }\n    }\n  });\n  const ref = useRef();\n  connectDrag(ref);\n  connectDrop(ref);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: ref,\n    style: {\n      visibility: isDragging ? 'hidden' : 'visible'\n    }\n  }, /*#__PURE__*/React.createElement(App, app));\n};\nDraggableApp.propTypes = {\n  app: PropTypes.any.isRequired,\n  onDrag: PropTypes.func.isRequired,\n  onDrop: PropTypes.func.isRequired\n};\nexport default DraggableApp;","// extracted by mini-css-extract-plugin\nexport default {\"apps\":\"MenuManagement_apps__Mvj9k\"};","import { useDataQuery, useDataMutation, useConfig, useAlert } from '@dhis2/app-runtime';\nimport { NoticeBox, CenteredContent, CircularLoader, Card } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useMemo, useState, useCallback } from 'react';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport i18n from '../../locales/index.js';\nimport DraggableApp from './DraggableApp.js';\nimport classes from './MenuManagement.module.css';\nconst query = {\n  apps: {\n    resource: 'action::menu/getModules'\n  }\n};\nconst mutation = {\n  resource: 'menu',\n  type: 'create',\n  data: _ref => {\n    let {\n      items\n    } = _ref;\n    return items;\n  }\n};\nconst moveApp = (apps, app, target) => {\n  const appIndex = apps.indexOf(app);\n  const targetIndex = apps.indexOf(target);\n  const newApps = [...apps];\n  newApps.splice(appIndex, 1);\n  newApps.splice(targetIndex, 0, app);\n  return newApps;\n};\nconst MenuManagement = _ref2 => {\n  let {\n    apps,\n    initialAppsOrder\n  } = _ref2;\n  const [appsOrder, setAppsOrder] = useState(initialAppsOrder);\n  const {\n    show: showSuccessfulUpdateAlert\n  } = useAlert(i18n.t('Updated order of apps.'), {\n    success: true\n  });\n  const {\n    show: showErrorUpdatingAlert\n  } = useAlert(message => message, {\n    critical: true\n  });\n  const [mutate] = useDataMutation(mutation, {\n    onComplete() {\n      showSuccessfulUpdateAlert();\n    },\n    onError(error) {\n      showErrorUpdatingAlert(error.message);\n    }\n  });\n  const handleAppDrag = useCallback((app, target) => {\n    const newAppsOrder = moveApp(appsOrder, app, target);\n    setAppsOrder(newAppsOrder);\n  }, [appsOrder]);\n  const handleAppDrop = useCallback(() => {\n    mutate({\n      items: appsOrder\n    });\n  }, [appsOrder]);\n  return /*#__PURE__*/React.createElement(Card, null, /*#__PURE__*/React.createElement(DndProvider, {\n    backend: HTML5Backend\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.apps\n  }, appsOrder.map(appName => /*#__PURE__*/React.createElement(DraggableApp, {\n    key: appName,\n    onDrag: handleAppDrag,\n    onDrop: handleAppDrop,\n    app: apps[appName]\n  })))));\n};\nMenuManagement.propTypes = {\n  apps: PropTypes.object.isRequired,\n  initialAppsOrder: PropTypes.array.isRequired\n};\nconst joinPath = function () {\n  for (var _len = arguments.length, parts = new Array(_len), _key = 0; _key < _len; _key++) {\n    parts[_key] = arguments[_key];\n  }\n  const realParts = parts.filter(part => !!part);\n  return realParts.map(part => part.replace(/^\\/+|\\/+$/g, '')).join('/');\n};\nconst MenuManagementWrapper = () => {\n  const {\n    baseUrl\n  } = useConfig();\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(query);\n  const apps = useMemo(() => {\n    const getPath = path => path.startsWith('http:') || path.startsWith('https:') ? path : joinPath(baseUrl, 'api', path);\n    return data === null || data === void 0 ? void 0 : data.apps.modules.map(app => ({\n      ...app,\n      icon: getPath(app.icon),\n      defaultAction: getPath(app.defaultAction)\n    }));\n  }, [data]);\n  if (loading) {\n    return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null));\n  }\n  if (error) {\n    const msg = i18n.t('Something went wrong whilst loading your apps');\n    return /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true,\n      title: msg\n    }, error.message);\n  }\n  const appsByName = {};\n  apps.forEach(app => appsByName[app.name] = app);\n  return /*#__PURE__*/React.createElement(MenuManagement, {\n    apps: appsByName,\n    initialAppsOrder: apps.map(_ref3 => {\n      let {\n        name\n      } = _ref3;\n      return name;\n    })\n  });\n};\nexport default MenuManagementWrapper;","import { CssVariables } from '@dhis2/ui';\nimport React from 'react';\nimport classes from './App.module.css';\nimport MenuManagement from './components/MenuManagement/index.js';\nimport i18n from './locales/index.js';\nconst App = () => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(CssVariables, {\n  spacers: true,\n  theme: true\n}), /*#__PURE__*/React.createElement(\"div\", {\n  className: classes.container\n}, /*#__PURE__*/React.createElement(\"header\", null, /*#__PURE__*/React.createElement(\"h1\", {\n  className: classes.title\n}, i18n.t('Your apps')), /*#__PURE__*/React.createElement(\"p\", {\n  className: classes.description\n}, i18n.t('Drag and drop the menu items to re-order them.'))), /*#__PURE__*/React.createElement(MenuManagement, null)));\nexport default App;"],"names":["namespace","i18n","addResources","arTranslations","csTranslations","enTranslations","esTranslations","frTranslations","nbTranslations","svTranslations","ukTranslations","urTranslations","uz_LatnTranslations","uz_UZ_CyrlTranslations","uz_UZ_LatnTranslations","viTranslations","zhTranslations","App","_ref","defaultAction","icon","displayName","React","className","classes","href","src","_ref2","app","onDrag","onDrop","isDragging","connectDrag","useDrag","item","name","type","collect","monitor","end","connectDrop","useDrop","accept","hover","ref","useRef","style","visibility","query","apps","resource","mutation","data","items","MenuManagement","initialAppsOrder","appsOrder","setAppsOrder","useState","show","showSuccessfulUpdateAlert","useAlert","t","success","showErrorUpdatingAlert","message","critical","mutate","useDataMutation","onComplete","onError","error","handleAppDrag","useCallback","target","newAppsOrder","moveApp","appIndex","indexOf","targetIndex","newApps","splice","handleAppDrop","Card","DndProvider","backend","HTML5Backend","map","appName","DraggableApp","key","MenuManagementWrapper","baseUrl","useConfig","loading","useDataQuery","useMemo","getPath","path","startsWith","_len","arguments","length","parts","Array","_key","filter","part","replace","join","joinPath","modules","CenteredContent","CircularLoader","msg","NoticeBox","title","appsByName","forEach","_ref3","CssVariables","spacers","theme"],"sourceRoot":""}