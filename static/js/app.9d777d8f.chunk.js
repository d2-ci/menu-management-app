(this["webpackJsonp@dhis2/app-shell"]=this["webpackJsonp@dhis2/app-shell"]||[]).push([[135],{282:function(e,a,t){e.exports={container:"App_container__2zgzu",title:"App_title__1NBlr",description:"App_description__3qOuV"}},283:function(e){e.exports=JSON.parse('{"Your apps":"","Drag and drop the menu items to re-order them.":"","Updated order of apps.":"","Something went wrong whilst loading your apps":""}')},284:function(e,a,t){e.exports={"app-link":"DraggableApp_app-link__1sukN","app-icon":"DraggableApp_app-icon__2JFke","app-name":"DraggableApp_app-name__2jau-"}},289:function(e,a,t){e.exports={apps:"MenuManagement_apps__23px2"}},293:function(e,a,t){"use strict";t.r(a);var n=t(6),r=t(0),p=t.n(r),s=t(282),c=t.n(s),l=t(7),i=t(292),o=t(290),m=t(4),u=t(283);m.a.addResources("en","default",u);var d=m.a,g=t(294),h=t(295),b=t(284),f=t.n(b);const E=({defaultAction:e,icon:a,displayName:t})=>p.a.createElement("div",null,p.a.createElement("a",{className:f.a["app-link"],href:e},p.a.createElement("img",{className:f.a["app-icon"],src:a}),p.a.createElement("div",{className:f.a["app-name"]},t)));var _=({app:e,onDrag:a,onDrop:t})=>{const[{isDragging:n},s]=Object(g.a)({item:{name:e.name,type:"APP"},collect:e=>({isDragging:e.isDragging()}),end:t}),[,c]=Object(h.a)({accept:"APP",hover(t){t.name!=e.name&&a(t.name,e.name)}}),l=Object(r.useRef)();return s(l),c(l),p.a.createElement("div",{ref:l,style:{visibility:n?"hidden":"visible"}},p.a.createElement(E,e))},O=t(289),j=t.n(O);const v={apps:{resource:"action::menu/getModules"}},A={resource:"menu",type:"create",data:({items:e})=>e},D=({apps:e,initialAppsOrder:a})=>{const[t,s]=Object(r.useState)(a),{show:c}=Object(l.b)(d.t("Updated order of apps."),{success:!0}),{show:m}=Object(l.b)((e=>e),{critical:!0}),[u]=Object(l.e)(A,{onComplete(){c()},onError(e){m(e.message)}}),g=Object(r.useCallback)(((e,a)=>{const n=((e,a,t)=>{const n=e.indexOf(a),r=e.indexOf(t),p=[...e];return p.splice(n,1),p.splice(r,0,a),p})(t,e,a);s(n)}),[t]),h=Object(r.useCallback)((()=>{u({items:t})}),[t]);return p.a.createElement(n.d,null,p.a.createElement(i.a,{backend:o.a},p.a.createElement("div",{className:j.a.apps},t.map((a=>p.a.createElement(_,{key:a,onDrag:g,onDrop:h,app:e[a]}))))))};var k=()=>{const{baseUrl:e}=Object(l.d)(),{loading:a,error:t,data:s}=Object(l.f)(v),c=Object(r.useMemo)((()=>{const a=a=>a.startsWith("http:")||a.startsWith("https:")?a:((...e)=>e.filter((e=>!!e)).map((e=>e.replace(/^\/+|\/+$/g,""))).join("/"))(e,"api",a);return null===s||void 0===s?void 0:s.apps.modules.map((e=>({...e,icon:a(e.icon),defaultAction:a(e.defaultAction)})))}),[s]);if(a)return p.a.createElement(n.e,null,p.a.createElement(n.f,null));if(t){const e=d.t("Something went wrong whilst loading your apps");return p.a.createElement(n.p,{error:!0,title:e},t.message)}const i={};return c.forEach((e=>i[e.name]=e)),p.a.createElement(D,{apps:i,initialAppsOrder:c.map((({name:e})=>e))})};a.default=()=>p.a.createElement(p.a.Fragment,null,p.a.createElement(n.h,{spacers:!0,theme:!0}),p.a.createElement("div",{className:c.a.container},p.a.createElement("header",null,p.a.createElement("h1",{className:c.a.title},d.t("Your apps")),p.a.createElement("p",{className:c.a.description},d.t("Drag and drop the menu items to re-order them."))),p.a.createElement(k,null)))}}]);
//# sourceMappingURL=app.9d777d8f.chunk.js.map