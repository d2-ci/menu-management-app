(this["webpackJsonp@dhis2/app-shell"]=this["webpackJsonp@dhis2/app-shell"]||[]).push([[135],{187:function(e,t,a){e.exports={container:"App_container__2zgzu",title:"App_title__1NBlr",description:"App_description__3qOuV"}},189:function(e){e.exports=JSON.parse('{"Your apps":"","Drag and drop the menu items to re-order them.":"","Updated order of apps.":"","Something went wrong whilst loading your apps":""}')},190:function(e,t,a){e.exports={"app-link":"DraggableApp_app-link__1sukN","app-icon":"DraggableApp_app-icon__2JFke","app-name":"DraggableApp_app-name__2jau-"}},195:function(e,t,a){e.exports={apps:"MenuManagement_apps__23px2"}},199:function(e,t,a){"use strict";a.r(t);var s=a(7),n=a(6),c=a(1),r=a(187),p=a.n(r),i=a(8),o=a(188),l=a(198),d=a(196),j=a(5),b=a.n(j),m=a(189);b.a.addResources("en","default",m);var u=b.a,h=a(200),O=a(201),g=a(190),x=a.n(g);const f=({defaultAction:e,icon:t,displayName:a})=>Object(s.jsx)("div",{children:Object(s.jsxs)("a",{className:x.a["app-link"],href:e,children:[Object(s.jsx)("img",{className:x.a["app-icon"],src:t}),Object(s.jsx)("div",{className:x.a["app-name"],children:a})]})});var _=({app:e,onDrag:t,onDrop:a})=>{const[{isDragging:n},r]=Object(h.a)({item:{name:e.name,type:"APP"},collect:e=>({isDragging:e.isDragging()}),end:a}),[,p]=Object(O.a)({accept:"APP",hover(a){a.name!=e.name&&t(a.name,e.name)}}),i=Object(c.useRef)();return r(i),p(i),Object(s.jsx)("div",{ref:i,style:{visibility:n?"hidden":"visible"},children:Object(s.jsx)(f,{...e})})},v=a(195),A=a.n(v);const D={apps:{resource:"action::menu/getModules"}},N={resource:"menu",type:"create",data:({items:e})=>e},k=({apps:e,initialAppsOrder:t})=>{const[a,r]=Object(c.useState)(t),{show:p}=Object(i.b)(u.t("Updated order of apps."),{success:!0}),{show:o}=Object(i.b)((e=>e),{critical:!0}),[j]=Object(i.e)(N,{onComplete(){p()},onError(e){o(e.message)}}),b=Object(c.useCallback)(((e,t)=>{const s=((e,t,a)=>{const s=e.indexOf(t),n=e.indexOf(a),c=[...e];return c.splice(s,1),c.splice(n,0,t),c})(a,e,t);r(s)}),[a]),m=Object(c.useCallback)((()=>{j({items:a})}),[a]);return Object(s.jsx)(n.d,{children:Object(s.jsx)(l.a,{backend:d.a,children:Object(s.jsx)("div",{className:A.a.apps,children:a.map((t=>Object(s.jsx)(_,{onDrag:b,onDrop:m,app:e[t]},t)))})})})};var w=()=>{const{baseUrl:e}=Object(i.d)(),{loading:t,error:a,data:r}=Object(i.f)(D),p=Object(c.useMemo)((()=>{const t=t=>t.startsWith("http:")||t.startsWith("https:")?t:Object(o.join)(e,"api",t);return null===r||void 0===r?void 0:r.apps.modules.map((e=>({...e,icon:t(e.icon),defaultAction:t(e.defaultAction)})))}),[r]);if(t)return Object(s.jsx)(n.e,{children:Object(s.jsx)(n.f,{})});if(a){const e=u.t("Something went wrong whilst loading your apps");return Object(s.jsx)(n.p,{error:!0,title:e,children:a.message})}const l={};return p.forEach((e=>l[e.name]=e)),Object(s.jsx)(k,{apps:l,initialAppsOrder:p.map((({name:e})=>e))})};t.default=()=>Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(n.h,{spacers:!0,theme:!0}),Object(s.jsxs)("div",{className:p.a.container,children:[Object(s.jsxs)("header",{children:[Object(s.jsx)("h1",{className:p.a.title,children:u.t("Your apps")}),Object(s.jsx)("p",{className:p.a.description,children:u.t("Drag and drop the menu items to re-order them.")})]}),Object(s.jsx)(w,{})]})]})}}]);
//# sourceMappingURL=app.d6b181e0.chunk.js.map