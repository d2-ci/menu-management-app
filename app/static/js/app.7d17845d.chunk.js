(this["webpackJsonp@dhis2/app-shell"]=this["webpackJsonp@dhis2/app-shell"]||[]).push([[135],{187:function(e,t,a){e.exports={container:"App_container__2zgzu",title:"App_title__1NBlr",description:"App_description__3qOuV"}},188:function(e){e.exports=JSON.parse('{"Your apps":"","Drag and drop the menu items to re-order them.":"","Updated order of apps.":"","Something went wrong whilst loading your apps":""}')},189:function(e,t,a){e.exports={"app-link":"DraggableApp_app-link__1sukN","app-icon":"DraggableApp_app-icon__2JFke","app-name":"DraggableApp_app-name__2jau-"}},194:function(e,t,a){e.exports={apps:"MenuManagement_apps__23px2"}},198:function(e,t,a){"use strict";a.r(t);var s=a(7),n=a(6),c=a(1),r=a(187),p=a.n(r),i=a(8),o=a(197),l=a(195),d=a(5),j=a.n(d),b=a(188);j.a.addResources("en","default",b);var m=j.a,u=a(199),h=a(200),O=a(189),g=a.n(O);const x=({defaultAction:e,icon:t,displayName:a})=>Object(s.jsx)("div",{children:Object(s.jsxs)("a",{className:g.a["app-link"],href:e,children:[Object(s.jsx)("img",{className:g.a["app-icon"],src:t}),Object(s.jsx)("div",{className:g.a["app-name"],children:a})]})});var f=({app:e,onDrag:t,onDrop:a})=>{const[{isDragging:n},r]=Object(u.a)({item:{name:e.name,type:"APP"},collect:e=>({isDragging:e.isDragging()}),end:a}),[,p]=Object(h.a)({accept:"APP",hover(a){a.name!=e.name&&t(a.name,e.name)}}),i=Object(c.useRef)();return r(i),p(i),Object(s.jsx)("div",{ref:i,style:{visibility:n?"hidden":"visible"},children:Object(s.jsx)(x,{...e})})},_=a(194),v=a.n(_);const A={apps:{resource:"action::menu/getModules"}},D={resource:"menu",type:"create",data:({items:e})=>e},N=({apps:e,initialAppsOrder:t})=>{const[a,r]=Object(c.useState)(t),{show:p}=Object(i.b)(m.t("Updated order of apps."),{success:!0}),{show:d}=Object(i.b)((e=>e),{critical:!0}),[j]=Object(i.e)(D,{onComplete(){p()},onError(e){d(e.message)}}),b=Object(c.useCallback)(((e,t)=>{const s=((e,t,a)=>{const s=e.indexOf(t),n=e.indexOf(a),c=[...e];return c.splice(s,1),c.splice(n,0,t),c})(a,e,t);r(s)}),[a]),u=Object(c.useCallback)((()=>{j({items:a})}),[a]);return Object(s.jsx)(n.d,{children:Object(s.jsx)(o.a,{backend:l.a,children:Object(s.jsx)("div",{className:v.a.apps,children:a.map((t=>Object(s.jsx)(f,{onDrag:b,onDrop:u,app:e[t]},t)))})})})};var k=()=>{const{baseUrl:e}=Object(i.d)(),{loading:t,error:a,data:r}=Object(i.f)(A),p=Object(c.useMemo)((()=>{const t=t=>t.startsWith("http:")||t.startsWith("https:")?t:((...e)=>e.filter((e=>!!e)).map((e=>e.replace(/^\/+|\/+$/g,""))).join("/"))(e,"api",t);return null===r||void 0===r?void 0:r.apps.modules.map((e=>({...e,icon:t(e.icon),defaultAction:t(e.defaultAction)})))}),[r]);if(t)return Object(s.jsx)(n.e,{children:Object(s.jsx)(n.f,{})});if(a){const e=m.t("Something went wrong whilst loading your apps");return Object(s.jsx)(n.p,{error:!0,title:e,children:a.message})}const o={};return p.forEach((e=>o[e.name]=e)),Object(s.jsx)(N,{apps:o,initialAppsOrder:p.map((({name:e})=>e))})};t.default=()=>Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(n.h,{spacers:!0,theme:!0}),Object(s.jsxs)("div",{className:p.a.container,children:[Object(s.jsxs)("header",{children:[Object(s.jsx)("h1",{className:p.a.title,children:m.t("Your apps")}),Object(s.jsx)("p",{className:p.a.description,children:m.t("Drag and drop the menu items to re-order them.")})]}),Object(s.jsx)(k,{})]})]})}}]);
//# sourceMappingURL=app.7d17845d.chunk.js.map