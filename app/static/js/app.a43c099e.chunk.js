(this["webpackJsonp@dhis2/app-shell"]=this["webpackJsonp@dhis2/app-shell"]||[]).push([[135],{187:function(e,t,s){e.exports={container:"App_container__2zgzu",title:"App_title__1NBlr",description:"App_description__3qOuV"}},189:function(e){e.exports=JSON.parse('{"Your apps":"","Drag and drop the menu items to re-order them.":"","Updated order of apps.":"","Something went wrong whilst loading your apps":""}')},190:function(e,t,s){e.exports={"app-link":"DraggableApp_app-link__1sukN","app-icon":"DraggableApp_app-icon__2JFke","app-name":"DraggableApp_app-name__2jau-"}},195:function(e,t,s){e.exports={apps:"MenuManagement_apps__23px2"}},199:function(e,t,s){"use strict";s.r(t);var a=s(7),c=s(6),n=s(1),r=s(187),p=s.n(r);const i=Object(n.createContext)();var o=({children:e})=>{const[t,s]=Object(n.useState)(null);return Object(a.jsxs)(i.Provider,{value:{showSuccessAlert:e=>{s({message:e,type:"success",timestamp:Date.now()})},showCriticalAlert:e=>{s({message:e,type:"critical",timestamp:Date.now()})}},children:[e,Object(a.jsx)(c.b,{children:t?[Object(a.jsx)(c.a,{[t.type]:!0,children:t.message},t.timestamp)]:null})]})},l=s(188),d=s(8),j=s(198),m=s(196),u=s(5),h=s.n(u),b=s(189);h.a.addResources("en","default",b);var O=h.a,g=s(200),x=s(201),f=s(190),_=s.n(f);const A=({defaultAction:e,icon:t,displayName:s})=>Object(a.jsx)("div",{children:Object(a.jsxs)("a",{className:_.a["app-link"],href:e,children:[Object(a.jsx)("img",{className:_.a["app-icon"],src:t}),Object(a.jsx)("div",{className:_.a["app-name"],children:s})]})});var v=({app:e,onMove:t})=>{const s=Object(n.useRef)(),[{isDragging:c},r]=Object(g.a)({item:{name:e.name,type:"APP"},collect:e=>({isDragging:e.isDragging()})}),[,p]=Object(x.a)({accept:"APP",drop(s){s.name!=e.name&&t(s.name,e.name)}});return r(s),p(s),Object(a.jsx)("div",{ref:s,style:{opacity:c?.5:1},children:Object(a.jsx)(A,{...e})})},w=s(195),N=s.n(w);const y={apps:{resource:"action::menu/getModules"}},D={resource:"menu",type:"create",data:({items:e})=>e},k=({apps:e,initialAppsOrder:t})=>{const[s,r]=Object(n.useState)(t),{showSuccessAlert:p,showCriticalAlert:o}=Object(n.useContext)(i),[l]=Object(d.d)(D,{onComplete(){p(O.t("Updated order of apps."))},onError(e){o(e.message)}}),u=Object(n.useCallback)(((e,t)=>{const a=((e,t,s)=>{const a=[...e],c=a.indexOf(t);a.splice(c,1);const n=a.indexOf(s);return a.splice(n,0,t),a})(s,e,t);l({items:a}),r(a)}),[s]);return Object(a.jsx)(c.d,{children:Object(a.jsx)(j.a,{backend:m.a,children:Object(a.jsx)("div",{className:N.a.apps,children:s.map((t=>Object(a.jsx)(v,{onMove:u,app:e[t]},t)))})})})};var S=()=>{const{baseUrl:e}=Object(d.c)(),{loading:t,error:s,data:r}=Object(d.e)(y),p=Object(n.useMemo)((()=>{const t=t=>t.startsWith("http:")||t.startsWith("https:")?t:Object(l.join)(e,"api",t);return null===r||void 0===r?void 0:r.apps.modules.map((e=>({...e,icon:t(e.icon),defaultAction:t(e.defaultAction)})))}),[r]);if(t)return Object(a.jsx)(c.e,{children:Object(a.jsx)(c.f,{})});if(s){const e=O.t("Something went wrong whilst loading your apps");return Object(a.jsx)(c.p,{error:!0,title:e,children:s.message})}const i={};return p.forEach((e=>i[e.name]=e)),Object(a.jsx)(k,{apps:i,initialAppsOrder:p.map((({name:e})=>e))})};t.default=()=>Object(a.jsxs)(o,{children:[Object(a.jsx)(c.h,{spacers:!0,theme:!0}),Object(a.jsxs)("div",{className:p.a.container,children:[Object(a.jsxs)("header",{children:[Object(a.jsx)("h1",{className:p.a.title,children:O.t("Your apps")}),Object(a.jsx)("p",{className:p.a.description,children:O.t("Drag and drop the menu items to re-order them.")})]}),Object(a.jsx)(S,{})]})]})}}]);
//# sourceMappingURL=app.a43c099e.chunk.js.map