(this["webpackJsonp@dhis2/app-shell"]=this["webpackJsonp@dhis2/app-shell"]||[]).push([[135],{187:function(e,t,s){e.exports={container:"App_container__2zgzu",title:"App_title__1NBlr",description:"App_description__3qOuV"}},189:function(e){e.exports=JSON.parse('{"Your apps":"","Drag and drop the menu items to re-order them.":"","Updated order of apps.":"","Something went wrong whilst loading your apps":""}')},190:function(e,t,s){e.exports={"app-link":"DraggableApp_app-link__1sukN","app-icon":"DraggableApp_app-icon__2JFke","app-name":"DraggableApp_app-name__2jau-"}},195:function(e,t,s){e.exports={apps:"MenuManagement_apps__23px2"}},199:function(e,t,s){"use strict";s.r(t);var a=s(7),n=s(6),c=s(1),r=s(187),i=s.n(r);const p=Object(c.createContext)();var o=({children:e})=>{const[t,s]=Object(c.useState)(null);return Object(a.jsxs)(p.Provider,{value:{showSuccessAlert:e=>{s({message:e,type:"success",timestamp:Date.now()})},showCriticalAlert:e=>{s({message:e,type:"critical",timestamp:Date.now()})}},children:[e,Object(a.jsx)(n.b,{children:t?[Object(a.jsx)(n.a,{[t.type]:!0,children:t.message},t.timestamp)]:null})]})},l=s(8),d=s(188),j=s(198),m=s(196),u=s(5),b=s.n(u),h=s(189);b.a.addResources("en","default",h);var O=b.a,g=s(200),x=s(201),f=s(190),_=s.n(f);const v=({defaultAction:e,icon:t,displayName:s})=>Object(a.jsx)("div",{children:Object(a.jsxs)("a",{className:_.a["app-link"],href:e,children:[Object(a.jsx)("img",{className:_.a["app-icon"],src:t}),Object(a.jsx)("div",{className:_.a["app-name"],children:s})]})});var A=({app:e,onDrag:t,onDrop:s})=>{const[{isDragging:n},r]=Object(g.a)({item:{name:e.name,type:"APP"},collect:e=>({isDragging:e.isDragging()}),end:s}),[,i]=Object(x.a)({accept:"APP",hover(s){s.name!=e.name&&t(s.name,e.name)}}),p=Object(c.useRef)();return r(p),i(p),Object(a.jsx)("div",{ref:p,style:{visibility:n?"hidden":"visible"},children:Object(a.jsx)(v,{...e})})},w=s(195),D=s.n(w);const N={apps:{resource:"action::menu/getModules"}},k={resource:"menu",type:"create",data:({items:e})=>e},y=({apps:e,initialAppsOrder:t})=>{const[s,r]=Object(c.useState)(t),{showSuccessAlert:i,showCriticalAlert:o}=Object(c.useContext)(p),[d]=Object(l.d)(k,{onComplete(){i(O.t("Updated order of apps."))},onError(e){o(e.message)}}),u=Object(c.useCallback)(((e,t)=>{const a=((e,t,s)=>{const a=e.indexOf(t),n=e.indexOf(s),c=[...e];return c.splice(a,1),c.splice(n,0,t),c})(s,e,t);r(a)}),[s]),b=Object(c.useCallback)((()=>{d({items:s})}),[s]);return Object(a.jsx)(n.d,{children:Object(a.jsx)(j.a,{backend:m.a,children:Object(a.jsx)("div",{className:D.a.apps,children:s.map((t=>Object(a.jsx)(A,{onDrag:u,onDrop:b,app:e[t]},t)))})})})};var C=()=>{const{baseUrl:e}=Object(l.c)(),{loading:t,error:s,data:r}=Object(l.e)(N),i=Object(c.useMemo)((()=>{const t=t=>t.startsWith("http:")||t.startsWith("https:")?t:Object(d.join)(e,"api",t);return null===r||void 0===r?void 0:r.apps.modules.map((e=>({...e,icon:t(e.icon),defaultAction:t(e.defaultAction)})))}),[r]);if(t)return Object(a.jsx)(n.e,{children:Object(a.jsx)(n.f,{})});if(s){const e=O.t("Something went wrong whilst loading your apps");return Object(a.jsx)(n.p,{error:!0,title:e,children:s.message})}const p={};return i.forEach((e=>p[e.name]=e)),Object(a.jsx)(y,{apps:p,initialAppsOrder:i.map((({name:e})=>e))})};t.default=()=>Object(a.jsxs)(o,{children:[Object(a.jsx)(n.h,{spacers:!0,theme:!0}),Object(a.jsxs)("div",{className:i.a.container,children:[Object(a.jsxs)("header",{children:[Object(a.jsx)("h1",{className:i.a.title,children:O.t("Your apps")}),Object(a.jsx)("p",{className:i.a.description,children:O.t("Drag and drop the menu items to re-order them.")})]}),Object(a.jsx)(C,{})]})]})}}]);
//# sourceMappingURL=app.15a63208.chunk.js.map